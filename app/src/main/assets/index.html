
<!DOCTYPE HTML>
<html lang="zh">
<head>
    <title>掌厨-用心做顿好饭</title>
    <meta charset="utf-8"/>
    <meta name="baidu-site-verification" content="Ct6kECtav2" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta name="format-detection" content="telephone=no,email=no,adress=no" />
    <meta name="description" content="掌厨-视频菜谱网站，美食，食谱，菜谱网。拥有最多的美食做法、菜谱、食谱大全以及家常菜菜谱，做你最喜爱的美食网，菜谱网。想要享受美食的乐趣。找家常菜谱,上掌厨美食社区！"/>
    <meta name="keywords" content="掌厨，掌厨美食，美食视频网，家常菜菜谱大全,美食社区,家常菜,菜谱大全, 菜谱，食谱" />
    <link rel="stylesheet" type="text/css" href="http://pub.szzhangchu.com/web/v4.2/css/style.css" />
    <link rel="stylesheet" type="text/css" href="http://pub.szzhangchu.com/web/v4.2/css/swiper.min.css" />
    <script type="text/javascript" src="http://pub.szzhangchu.com/web/v4.2/js/swiper.min.js"></script>
    <script src="http://pub.szzhangchu.com/web/v4.2/js/jquery.min.js"></script>
    <script src="http://pub.szzhangchu.com/web/v4.2/js/jquery.tmpl.min.js"></script>
    <script src="http://pub.szzhangchu.com/web/v4.2/js/pagination.js"></script>
    <link rel="stylesheet" href="https://g.alicdn.com/de/prismplayer/2.5.0/skins/default/aliplayer-min.css" />
    <script type="text/javascript" src="https://g.alicdn.com/de/prismplayer/2.5.0/aliplayer-min.js"></script>
        <script src="http://pub.szzhangchu.com/web/v4.2/js/functionGlobal.js"></script>
    </head>
<body>
<script>
// 用户会话
var userinfo=FunctionGlobal.userinfo;
FunctionGlobal.fromtype=0;
</script>
<style>
	.header-search{background-color:#e6e6e6;}
	.search-wrap{padding:0.4rem 0;background-color:#fff;}
	.header-wrap{height:auto;}
	.header-search-page {margin-left:1.5rem;margin-right:2.2rem;}
	.search-btn{font-size:0.65rem;width:2.2rem;color:#a0a0a0;}
	/*.ico-back-black{background-image: url('http://pub.szzhangchu.com/web/v4.2/images/ico/ico-back-white.png');}*/
	.menu-wrap{display:none;}
	.header-search .ico{margin-top: .1rem;}
	.ico-search {width:1.2rem;height:1.2rem;float:left;margin-left:1.5rem;}
	::-webkit-input-placeholder{font-size:0.6rem !important;color:#a0a0a0 !important;}
	:-moz-placeholder{font-size:0.6rem !important;color:#a0a0a0 !important;}
	::-moz-placeholder{font-size:0.6rem !important;color:#a0a0a0 !important;}
	:-ms-input-placeholder{font-size:0.6rem !important;color:#a0a0a0 !important;}
	.header-search .header-search-input{text-align:left;color:#5d5d5d;font-family: "microsoft YaHei",sans-serif;}
</style>
<script src="http://pub.szzhangchu.com/web/v4.2/js/search.js"></script>
<header class="header">
	<div class="header-wrap search-wrap">
		<div class="header-back-warp left">
			<a class="header-ico"><i class="ico ico-back-black"></i></a>
		</div>
		<form class="searchForm" name="searchForm" method="post">
			<div class="header-search header-search-page">
				<i class="ico ico-search"></i>
				<!-- <span class="line"></span> -->
				<input name="keyword" value="" type="text" class="header-search-input" placeholder="请输入菜名或者食材搜索" id="search-input" data-url ="/search/index.html?&keyword="  />
				<!-- <i class="ico ico-clear" id="btn-clear"></i> -->
			</div>
			<button type="submit" class="search-btn" id="search-btn">搜索</button>
		</form>
	</div>
</header>
<div class="header-gap"></div>
<div class="search-keyword-md hidden" id="page-1">
	<ul id="search-keyword-wrap"></ul>
	<script id="search-keyword-tmpl" type="text/x-jquery-tmpl">
		<li><a href="/dishes_view/index.html?&dishes_id=${id}">{{html text}}</a></li>
	</script>
</div>
<div id="page-2">
	<div class="search-md md search-history-md">
		<h6>热门搜索</h6>
		<div class="list">
			<ul class="clearfix" id="hotsearch-wrap"></ul>
			<script id="hotsearch-tmpl" type="text/x-jquery-tmpl">
				<li><a href="/search/index.html?&keyword=${encodeURIComponent(encodeURIComponent((text)))}">${text}</a></li>
			</script>
		</div>
	</div>
	<div class="search-md md">
		<h6>历史搜索</h6>
		<div class="list">
			<ul class="clearfix" id="history-wrap"><li class="loading-wrap">暂无搜索历史</li></ul>
			<script id="history-tmpl" type="text/x-jquery-tmpl">
				<li><a href="/search/index.html?&keyword=${encodeURIComponent(encodeURIComponent((text)))}">${text}</a></li>
			</script>
		</div>
	</div>
</div>

<script>
    // 公共入口
    $(document).ready(function(){
        function init(){
            // 是否app判断
            if(FunctionGlobal.isFromZCApp()){
                // 隐藏侧导航按钮
                $("#popmenu").hide();
            }else{
                // 底部
                foot_show();
                // 加载时特效
                pop_loader();
                // 控制切换左侧导航和滑动效果
                left_nav();
            }
            // 全局返回键
            back_wrap();
            // 当前窗口打开
            addLinkSelf();
        }
        init();
    });
    // 控制切换左侧导航和滑动效果
    function left_nav(){
        var isHiden = true;
        $("#popmenu").bind("tap", function () {
            if (isHiden) {
                setTimeout(function () {
                    $(".leftnav").show();
                    var swiper = new Swiper('.leftnav .swiper-container', {
                        direction : 'vertical',
                        slidesPerView:6,
                        mousewheelControl : true,//鼠标滚轮
                        mousewheelForceToAxis : true,//鼠标滚轮
                        observer:true,//修改swiper自己或子元素时，自动初始化swiper
                        observeParents:true//修改swiper的父元素时，自动初始化swiper
                    });
                    $("html,body").addClass("ovfHiden"); //使网页不可滚动
                    $("#maskPage").addClass('mask-page');
                    $("#maskPage").show();
                    $(".menu-wrap .ico").addClass("ico-menu-red");
                    $(".page").css("left", "9.4rem");
                    $(".footer-gap").css({"position":"relative","background":"#fff"});
                    setTimeout(function () {
                        $("#maskPage").on("click", function () {
                            $("#maskPage").hide().removeClass('mask-page');
                            $(".page").css("left", "0");
                            $(".ico-menu-red").removeClass("ico-menu-red");
                            $('html,body').removeClass('ovfHiden');//使网页恢复可滚动
                            isHiden = true;
                        });
                    }, 300);
                }, 100);
            } else {
                setTimeout(function () {
                    $("#maskPage").hide().removeClass('mask-page');
                    $(".page").css("left", "0");
                    $(".ico-menu-red").removeClass("ico-menu-red");
                    $('html,body').removeClass('ovfHiden');//使网页恢复可滚动
                }, 100);
            }
            isHiden = !isHiden;
        });
    }
    // 加载底部
    function foot_show(){
        $(document.body).append('<div class="footer-app layout-footer" id="footer-app"></div>');
        $.ajax({
            url:"/html/footer.html",
            success:function(data){
                $("#footer-app").append(data);
                $("#delete-fixed-footer-download").on("click",function(){
                    $("#footer-app").hide();
                    //解决商品详情页底部按钮问题
                    $(".user-submit-pd").css("padding","0.8rem 2rem");
                });
            }
        });
    }
    // 加载时特效
    function pop_loader(){
        $(document.body).append('<div class="pop-loader hidden"><div class="loader-inner ball-spin-fade-loader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div class="errormsg"></div>');
    }
    // 当前窗口打开
    function addLinkSelf(){
        var aList = $("body").find("a");
        $.each(aList,function(i,item){
            $(item).attr("target", "_self");
        });
        // 首页底部备案跳转新页面
        $(".targetBlank").attr("target","blank");
    }
    // 全局返回键
    function back_wrap(){
        $(".header-back-warp").on("click",function(){
            if(FunctionGlobal.isFromZCApp()){
                if(FunctionGlobal.GetQueryString('quitout')){
                    // 原生购买>商品详情
                    FunctionGlobal.QuitOut();
                    return false;
                }else{
                    FunctionGlobal.exitWebView();
                }
            }else{
                if (history.length > 1) {
                    history.go(-1);
                } else if (history.length == 1) {
                    window.location.href = "/index.php"
                }
            }
        });
    }
    // 给loading统一添加父元素
    function loading_wrap(){
        $("div.loading").wrap("<div></div>");
        $("div.loading").parent().addClass("loading-wrap");
        $("#load-ing").parent().hide();
        $("#load-stop").parent().hide();
    }

    // 视频接口，播放器调用
    function PlayerDate(dishes_id,videoType,cover,dishesType){
        var param = {
            methodName:"PlayVoucherUrl",
            videoType:videoType, //视频类型 枚举 (1-菜肴，2-食材，3-美食IP，6-健康IP，7-新手入门-食材处理，8-新手入门-厨房技能)
            id:dishes_id, //对应资源ID
            dishesType: dishesType //当 videoType是菜肴的时,必填 只有菜肴分AB段 枚举类型: （A-视频A段，B-视频B段）
        };
        FunctionGlobal.SendPost(param,function(json){
            $('#prismPlayer_wrap').append('<div class="prism-player" id="J_prismPlayer"></div>');
            $('#J_prismPlayer').height($('#J_prismPlayer').width()*0.532);
            var playURL = json.data.playURL;
            WebAliplayer(dishes_id,videoType,cover,playURL,dishesType);
        });
    }

    // 阿里云Web播放器
    function WebAliplayer(dishes_id,videoType,cover,playURL,dishesType){
        var u = navigator.userAgent;
        var isIos = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
        var isAndroid= u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
        var isQQ = u.match(/QQ\//i); //判断qq
        var isMQQ = u.match(/MQQBrowser/i); //判断qq浏览器
        var isWX = u.match(/MicroMessenger/i); //判断微信
        // 安卓qq浏览器支持下载播放，所以做下面判断,不许QQ或qq浏览器打开，其他暂不考虑
        if(isQQ || isMQQ){
            if(isWX){
                palyReady();
            }else{
                if(isIos){
                    alert('浏览器不支持视频播放,请用微信或Safari打开网页');
                }else(
                    alert('浏览器不支持视频播放,请用微信或其他浏览器打开网页')
                );
                $("#J_prismPlayer").remove();
                $('#prismPlayer_wrap img').remove();
                $('#prismPlayer_wrap').append('<img class="wimg" src="' + cover +'"/>');
            }
        }else{
            palyReady();
        }
        function palyReady(){
            if(isIos || isAndroid ){
                var Autoplay = false;
            }else{
                var Autoplay = true;
            }
            var player = new Aliplayer({
                id: "J_prismPlayer",
                autoplay: Autoplay,
                controlBarVisibility:"click",
                source : playURL,
                cover:cover,
            },function(player){
                console.log('播放器创建好了。');
                $(".prism-big-play-btn").css({'left':'50%','top':'50%','transform':'translate(-50%,-50%)'});
                $(".prism-player a").css('font-size','0.65rem');
                player.on('ready',function(e) {
                    console.log('ddd')
                    //判断为ip视频时（3为美食、6给健康），第一次播放时调用视频统计上报;
                    if(videoType == '3'){
                        var BType = 'foodcourse';
                        ReportVideo(dishes_id,BType);
                    }else if(videoType == '6'){
                        var BType = 'healthycourse';
                        ReportVideo(dishes_id,BType);
                    };
                    //player.fullscreenService.requestFullScreen();
                });
                player.on('play',function(e){
                    // 安卓头部栏会遮挡部分视频，所以由此判断
                    if(isWX){
                        $(".header").css('z-index','0');
                        $('#DishesView-wrap').css('margin-top',"10px");
                    }
                });
                player.on('pause',function(e){
                    if(isWX){
                        $(".header").css('z-index','10000');
                        $('#DishesView-wrap').css('margin-top',"0");
                    }
                })
                player.on('ended',function(e){
                    console.log(dishesType)
                    // 菜谱详情页第一段播完，自动播放器下一段
                    if(dishesType == "A"){
                        $("#btn-process").click();
                        $("#J_prismPlayer").click()
                    }
                })
            });
        }

        // 视频统计上报成功
        function ReportVideo(dishes_id,BType){
            var param = {
                methodName:"ReportVideo",
                version:"5.04",
                Btype:BType,
                mainId:dishes_id,
                device:'browse'
            };
            FunctionGlobal.SendPost(param,function(json){
                console.log("视频统计上报成功")
            });
        }
    }
</script>
<script>
// 百度统计
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    // hm.src = "//hm.baidu.com/hm.js?078933d0bb9bf6d161f875dd8c0b1ac2";
    hm.src = "//pub.szzhangchu.com/web/js/zhangchu_baidu_hm.js";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>